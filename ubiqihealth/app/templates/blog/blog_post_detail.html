{% extends "blog/blog_post_list.html" %}
{% load mezzanine_tags comment_tags keyword_tags rating_tags i18n future disqus_tags %}

{% block meta_title %}{{ blog_post.meta_title }}{% endblock %}

{% block meta_keywords %}{% metablock %}
{% keywords_for blog_post as tags %}
{% for tag in tags %}{% if not forloop.first %}, {% endif %}{{ tag }}{% endfor %}
{% endmetablock %}{% endblock %}

{% block meta_description %}{% metablock %}
{{ blog_post.description }}
{% endmetablock %}{% endblock %}

{% block blog_content %}

<div class="author-pic">
  {% if settings.BLOG_USE_FEATURED_IMAGE and blog_post.featured_image %}
    <img class="img-circle" src="{{ MEDIA_URL }}{% thumbnail blog_post.featured_image 74 74 %}">
  {% endif %}
</div>

<div class="content blog-post">
  {% block title %}
    <h1>{% editable blog_post.title %}{{ blog_post.title }}{% endeditable %}</h1>
  {% endblock %}

  {% block blog_post_list_post_metainfo %}
  {% editable blog_post.publish_date %}
  <h3 class="post-meta">
      {% trans "By" %}
      {% with blog_post.user as author %}
        <a href="{% url "blog_post_list_author" author %}">{{ author.get_full_name|default:author.username }}</a>
      {% endwith %}
      - {{ blog_post.publish_date }}
  </h3>
  {% endeditable %}
  {% endblock %}

  {% block blog_post_list_post_content %}
    {% editable blog_post.content %}
      {{ blog_post.content|richtext_filters|safe }}
    {% endeditable %}
  {% endblock %}

  {% keywords_for blog_post as tags %}
  {% if tags %}
    <div class="blog-list-detail">
      <ul class="list-inline tags">
      {% trans "Tags" %}:
      {% spaceless %}
      {% for tag in tags %}
      <li><a href="{% url "blog_post_list_tag" tag.slug %}" class="tag">{{ tag }}</a></li>
      {% endfor %}
      {% endspaceless %}
      </ul>
    </div>
  {% endif %}

  {% block blog_post_detail_commentlink %}
  <p>
      {% if blog_post.allow_comments %}
          {% if settings.COMMENTS_DISQUS_SHORTNAME %}
              (<a href="{{ blog_post.get_absolute_url }}#disqus_thread"
                  data-disqus-identifier="{% disqus_id_for blog_post %}">{% spaceless %}
                  {% trans "Comments" %}
              {% endspaceless %}</a>)
          {% endif %}
      {% endif %}
  </p>
  {% endblock %}

  {% block blog_post_detail_comments %}
  {% if blog_post.allow_comments %}{% comments_for blog_post %}{% endif %}
  {% endblock %}

  <div class="comment-bottom social-share pull-left">
    {% block blog_post_detail_sharebuttons %}
      {% set_short_url_for blog_post %}
      <p>SOCIAL NETWORKS</p>
      <p>
        <a target="_blank" href="http://twitter.com/home?status={{ blog_post.short_url|urlencode }}%20{{ blog_post.title|urlencode }}">
          <span class="comment-share comment-share-twitter"></span>
        </a>
        <a target="_blank" href="http://facebook.com/sharer.php?u={{ request.build_absolute_uri }}&amp;t={{ blog_post.title|urlencode }}">
          <span class="comment-share comment-share-facebook"></span>
        </a>
        <a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url={{ request.build_absolute_uri }}&amp;title={{ blog_post.title|urlencode }}">
          <span class="comment-share comment-share-linkedin"></span>
        </a>
      </p>
    {% endblock %}
  </div>
  <div style="clear:both;"></div>

  {% block blog_post_previous_next %}
  <ul class="pager">
  {% with blog_post.get_previous_by_publish_date as previous %}
  {% if previous %}
  <li class="previous">
      <a href="{{ previous.get_absolute_url }}">&larr; {{ previous }}</a>
  </li>
  {% endif %}
  {% endwith %}
  {% with blog_post.get_next_by_publish_date as next %}
  {% if next %}
  <li class="next">
      <a href="{{ next.get_absolute_url }}">{{ next }} &rarr;</a>
  </li>
  {% endif %}
  {% endwith %}
  </ul>
  {% endblock %}


</div>

{% endblock %}

{% block extra_js %}
  <script src="{{ STATIC_URL }}js/blog.js"></script>
{% endblock %}
