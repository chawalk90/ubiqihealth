{% load blog_tags keyword_tags mezzanine_tags i18n future custom_tags %}

<div class="side-block">
{% block blog_months %}
{% all_months as months %}
{% if months %}
  <h1>{% trans "Older Posts" %}</h1>
  {% for month, posts in months %}
    {% ifchanged month.year %}
      {% if not forloop.first %}</ul>{% endif %}
      <h4>{{ month.year }}</h4>
      <ul class="list-unstyled">
    {% endifchanged %}
    <li>
      <a href="{% url "blog_post_list_month" year=month.year month=month.month %}">
        {{ month|date:"F" }}
      </a>
      ({{ posts|length }})
      {% if posts %}
        &nbsp;<span class="small_arrow_icon"></span>
        <ul class="list-unstyled category-entries">
          {% for blog_post in posts %}
            <li><a href="{{ blog_post.get_absolute_url }}">{{ blog_post.title }}</a></li>
          {% endfor %}
        </ul>
      {% endif %}
    </li>
  {% endfor %}
  </ul>
{% endif %}
{% endblock %}
</div>

{% block blog_categories %}
{% all_categories as categories %}
{% if categories %}
  <div class="side-block">
    <h1>{% trans "Categories" %}</h1>
    <ul class="list-unstyled">
      {% for category in categories %}
        <li>
          <a href="{% url "blog_post_list_category" category.slug %}">{{ category }}</a>
          ({{ category.post_count }})
          {% if category.post_count %}
            &nbsp;<span class="small_arrow_icon"></span>
            <ul class="list-unstyled category-entries">
            {% for blog_post in category.blogposts.all %}
              <li><a href="{{ blog_post.get_absolute_url }}">{{ blog_post.title }}</a></li>
            {% endfor %}
            </ul>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  </div>
{% endif %}
{% endblock %}